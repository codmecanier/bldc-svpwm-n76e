C51 COMPILER V9.59.0.0   SVPWM                                                             10/03/2018 20:56:08 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE SVPWM
OBJECT MODULE PLACED IN .\Objects\SVPWM.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE SVPWM.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\SVP
                    -WM.lst) TABS(2) OBJECT(.\Objects\SVPWM.obj)

line level    source

   1          #include "SVPWM.h"
   2          #include "3PhaseInverter.h"
   3          
   4          bit PhaseU_Target;
   5          bit PhaseV_Target;
   6          bit PhaseW_Target;
   7          
   8          unsigned int T07,T1,T2,PWMB,PWMM,PWMS;
   9          
  10          bit SVPFirstHalfSector;
  11          
  12          unsigned int code T1Array[]={0,
  13          4,9,13,18,22,
  14          27,31,35,40,44,
  15          48,53,57,61,66,
  16          70,74,78,83,87,
  17          91,95,99,103,107,
  18          111,115,119,123,127,
  19          131,135,138,142,146,
  20          149,153,156,160,163,
  21          167,170,173,176,180,
  22          183,186,189,192,195,
  23          197,200,203,205,208,
  24          211,213,215,218,220,
  25          218,215,213,211,208,
  26          205,203,200,197,195,
  27          192,189,186,183,180,
  28          176,173,170,167,163,
  29          160,156,153,149,146,
  30          142,138,135,131,127,
  31          123,119,115,111,107,
  32          103,99,95,91,87,
  33          83,78,74,70,66,
  34          61,57,53,48,44,
  35          40,35,31,27,22,
  36          18,13,9,4,0,
  37          4,9,13,18,22,
  38          27,31,35,40,44,
  39          48,53,57,61,66,
  40          70,74,78,83,87,
  41          91,95,99,103,107,
  42          111,115,119,123,127,
  43          131,135,138,142,146,
  44          149,153,156,160,163,
  45          167,170,173,176,180,
  46          183,186,189,192,195,
  47          197,200,203,205,208,
  48          211,213,215,218,220,
  49          218,215,213,211,208,
  50          205,203,200,197,195,
  51          192,189,186,183,180,
  52          176,173,170,167,163,
  53          160,156,153,149,146,
  54          142,138,135,131,127,
C51 COMPILER V9.59.0.0   SVPWM                                                             10/03/2018 20:56:08 PAGE 2   

  55          123,119,115,111,107,
  56          103,99,95,91,87,
  57          83,78,74,70,66,
  58          61,57,53,48,44,
  59          40,35,31,27,22,
  60          18,13,9,4,0,
  61          4,9,13,18,22,
  62          27,31,35,40,44,
  63          48,53,57,61,66,
  64          70,74,78,83,87,
  65          91,95,99,103,107,
  66          111,115,119,123,127,
  67          131,135,138,142,146,
  68          149,153,156,160,163,
  69          167,170,173,176,180,
  70          183,186,189,192,195,
  71          197,200,203,205,208,
  72          211,213,215,218,220,
  73          218,215,213,211,208,
  74          205,203,200,197,195,
  75          192,189,186,183,180,
  76          176,173,170,167,163,
  77          160,156,153,149,146,
  78          142,138,135,131,127,
  79          123,119,115,111,107,
  80          103,99,95,91,87,
  81          83,78,74,70,66,
  82          61,57,53,48,44,
  83          40,35,31,27,22,
  84          18,13,9,4,0,
  85          
  86          };
  87          
  88          unsigned int code T2Array[]={220,
  89          222,224,226,228,230,
  90          232,234,236,237,239,
  91          240,242,243,244,245,
  92          246,247,248,249,250,
  93          251,252,252,253,253,
  94          253,254,254,254,254,
  95          254,254,254,253,253,
  96          253,252,252,251,250,
  97          249,248,247,246,245,
  98          244,243,242,240,239,
  99          237,236,234,232,230,
 100          228,226,224,222,220,
 101          222,224,226,228,230,
 102          232,234,236,237,239,
 103          240,242,243,244,245,
 104          246,247,248,249,250,
 105          251,252,252,253,253,
 106          253,254,254,254,254,
 107          254,254,254,253,253,
 108          253,252,252,251,250,
 109          249,248,247,246,245,
 110          244,243,242,240,239,
 111          237,236,234,232,230,
 112          228,226,224,222,220,
 113          222,224,226,228,230,
 114          232,234,236,237,239,
 115          240,242,243,244,245,
 116          246,247,248,249,250,
C51 COMPILER V9.59.0.0   SVPWM                                                             10/03/2018 20:56:08 PAGE 3   

 117          251,252,252,253,253,
 118          253,254,254,254,254,
 119          254,254,254,253,253,
 120          253,252,252,251,250,
 121          249,248,247,246,245,
 122          244,243,242,240,239,
 123          237,236,234,232,230,
 124          228,226,224,222,220,
 125          222,224,226,228,230,
 126          232,234,236,237,239,
 127          240,242,243,244,245,
 128          246,247,248,249,250,
 129          251,252,252,253,253,
 130          253,254,254,254,254,
 131          254,254,254,253,253,
 132          253,252,252,251,250,
 133          249,248,247,246,245,
 134          244,243,242,240,239,
 135          237,236,234,232,230,
 136          228,226,224,222,220,
 137          222,224,226,228,230,
 138          232,234,236,237,239,
 139          240,242,243,244,245,
 140          246,247,248,249,250,
 141          251,252,252,253,253,
 142          253,254,254,254,254,
 143          254,254,254,253,253,
 144          253,252,252,251,250,
 145          249,248,247,246,245,
 146          244,243,242,240,239,
 147          237,236,234,232,230,
 148          228,226,224,222,220,
 149          222,224,226,228,230,
 150          232,234,236,237,239,
 151          240,242,243,244,245,
 152          246,247,248,249,250,
 153          251,252,252,253,253,
 154          253,254,254,254,254,
 155          254,254,254,253,253,
 156          253,252,252,251,250,
 157          249,248,247,246,245,
 158          244,243,242,240,239,
 159          237,236,234,232,230,
 160          228,226,224,222,220,
 161          
 162          
 163          };
 164          
 165          
 166          void CalculateInverterVectorsWidth_Polar(unsigned int deg, unsigned char length)
 167          {
 168   1        T1 = (T1Array[deg] * length) >> 8;
 169   1        T2 = (T2Array[deg] * length) >> 8;
 170   1        T07 = (255-T2) >> 1;
 171   1        
 172   1        PWMS = T07;
 173   1        PWMM = T07 + T1;
 174   1        PWMB = T07 + T2;
 175   1        
 176   1        EA = 0;
 177   1        
 178   1        if((deg < 60))
C51 COMPILER V9.59.0.0   SVPWM                                                             10/03/2018 20:56:08 PAGE 4   

 179   1        {
 180   2          TA = 0X0AA;
 181   2          TA = 0X55;
 182   2          SFRS = 1;
 183   2          PWM4L = T07;
 184   2          if(PWMM - T07 > 30) 
 185   2            PWMINTC=0X15;
 186   2          else    
 187   2            PWMINTC=0X13;
 188   2          TA = 0X0AA;
 189   2          TA = 0X55;
 190   2          SFRS = 0;
 191   2          PWM2L = PWMM;
 192   2          PWM0L = PWMB;
 193   2        }
 194   1        else if((deg < 120))
 195   1        {
 196   2          TA = 0X0AA;
 197   2          TA = 0X55;
 198   2          SFRS = 1;
 199   2          PWM4L = T07;
 200   2          if(PWMM - T07 > 30) 
 201   2            PWMINTC=0X15;
 202   2          else    
 203   2            PWMINTC=0X11;
 204   2          TA = 0X0AA;
 205   2          TA = 0X55;
 206   2          SFRS = 0;
 207   2          PWM0L = PWMM;
 208   2          PWM2L = PWMB;
 209   2        }
 210   1        else if((deg < 180))
 211   1        {
 212   2          PWM0L = T07;
 213   2          TA = 0X0AA;
 214   2          TA = 0X55;
 215   2          SFRS = 1;
 216   2          PWM4L = PWMM;
 217   2          if(PWMM - T07 > 30) 
 218   2            PWMINTC=0X11;
 219   2          else    
 220   2            PWMINTC=0X15;
 221   2          TA = 0X0AA;
 222   2          TA = 0X55;
 223   2          SFRS = 0;
 224   2          PWM2L = PWMB;
 225   2        }
 226   1        else if((deg < 240))
 227   1        {
 228   2          PWM0L = T07;
 229   2          PWM2L = PWMM;
 230   2          TA = 0X0AA;
 231   2          TA = 0X55;
 232   2          SFRS = 1;
 233   2          PWM4L = PWMB;
 234   2          if(PWMM - T07 > 30) 
 235   2            PWMINTC=0X11;
 236   2          else    
 237   2            PWMINTC=0X13;
 238   2          TA = 0X0AA;
 239   2          TA = 0X55;
 240   2          SFRS = 0;
C51 COMPILER V9.59.0.0   SVPWM                                                             10/03/2018 20:56:08 PAGE 5   

 241   2        }
 242   1        else if((deg < 300))
 243   1        {
 244   2          PWM2L = T07;
 245   2          PWM0L = PWMM;
 246   2          TA = 0X0AA;
 247   2          TA = 0X55;
 248   2          SFRS = 1;
 249   2          PWM4L = PWMB;
 250   2          if(PWMM - T07 > 30) 
 251   2            PWMINTC=0X13;
 252   2          else    
 253   2            PWMINTC=0X11;
 254   2          TA = 0X0AA;
 255   2          TA = 0X55;
 256   2          SFRS = 0;
 257   2        }
 258   1        else if((deg < 360))
 259   1        {
 260   2          PWM2L = T07;
 261   2          TA = 0X0AA;
 262   2          TA = 0X55;
 263   2          SFRS = 1;
 264   2          PWM4L = PWMM;
 265   2          if(PWMM - T07 > 30) 
 266   2            PWMINTC=0X11;
 267   2          else    
 268   2            PWMINTC=0X15;
 269   2          TA = 0X0AA;
 270   2          TA = 0X55;
 271   2          SFRS = 0;
 272   2          PWM0L = PWMB;
 273   2        }
 274   1        EA = 1;
 275   1        PMEN = 0X00;
 276   1        PWMCON1 |= 0X10;
 277   1        PWMCON0 |= 0X40;
 278   1      }
 279          
 280          
 281          
 282          
 283          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    519    ----
   CONSTANT SIZE    =   1444    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      4    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
