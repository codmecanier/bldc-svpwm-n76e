C51 COMPILER V9.59.0.0   SVPWM                                                             01/23/2019 17:22:28 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE SVPWM
OBJECT MODULE PLACED IN .\Objects\SVPWM.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE SVPWM.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\SVP
                    -WM.lst) TABS(2) OBJECT(.\Objects\SVPWM.obj)

line level    source

   1          #include "SVPWM.h"
   2          #include "3PhaseInverter.h"
   3          
   4          bit PhaseU_Target;
   5          bit PhaseV_Target;
   6          bit PhaseW_Target;
   7          
   8          unsigned int T07,T1,T2,PWMB,PWMM,PWMS;
   9          
  10          bit SVPFirstHalfSector;
  11          
  12          unsigned char code SVPList1[]={0,
  13          6,12,19,25,31,
  14          37,43,50,56,62,
  15          68,74,80,86,92,
  16          97,103,109,114,120,
  17          125,131,136,141,146,
  18          151,156,161,166,171,
  19          175,180,184,188,192,
  20          197,200,204,208,211,
  21          215,218,219,216,212,
  22          209,205,201,197,193,
  23          189,185,181,176,172,
  24          167,162,158,153,148,
  25          142,137,132,127,121,
  26          116,110,104,99,93,
  27          87,81,75,69,63,
  28          57,51,45,39,33,
  29          26,20,14,8,1,
  30          5,11,17,23,30,
  31          36,42,48,54,60,
  32          66,72,78,84,90,
  33          96,102,107,113,119,
  34          124,129,135,140,145,
  35          150,155,160,165,170,
  36          174,179,183,187,192,
  37          196,199,203,207,211,
  38          214,217,220,216,213,
  39          210,206,202,198,194,
  40          190,186,182,177,173,
  41          168,164,159,154,149,
  42          144,139,133,128,122,
  43          117,111,106,100,94,
  44          88,83,77,71,65,
  45          59,53,46,40,34,
  46          28,22,15,9,3,
  47          3,10,16,22,28,
  48          34,41,47,53,59,
  49          65,71,77,83,89,
  50          95,100,106,112,117,
  51          123,128,134,139,144,
  52          149,154,159,164,169,
  53          173,178,182,186,191,
  54          195,199,202,206,210,
C51 COMPILER V9.59.0.0   SVPWM                                                             01/23/2019 17:22:28 PAGE 2   

  55          213,216,220,217,214,
  56          210,207,203,199,195,
  57          191,187,183,178,174,
  58          169,165,160,155,150,
  59          145,140,134,129,124,
  60          118,113,107,101,96,
  61          90,84,78,72,66,
  62          60,54,48,42,36,
  63          29,23,17,11,4,
  64          };
  65          
  66          unsigned char code SVPList2[]={220,
  67          223,226,229,231,234,
  68          236,238,241,242,244,
  69          246,247,249,250,251,
  70          252,253,253,254,254,
  71          254,254,254,253,253,
  72          252,252,251,249,248,
  73          247,245,244,242,240,
  74          238,235,233,230,228,
  75          225,222,221,224,227,
  76          230,232,235,237,239,
  77          241,243,245,246,248,
  78          249,250,251,252,253,
  79          253,254,254,254,254,
  80          254,253,253,252,251,
  81          250,249,248,246,245,
  82          243,241,239,237,234,
  83          232,229,227,224,221,
  84          222,225,228,231,233,
  85          236,238,240,242,244,
  86          246,247,248,250,251,
  87          252,252,253,254,254,
  88          254,254,254,254,253,
  89          252,252,251,250,249,
  90          247,246,244,242,240,
  91          238,236,234,231,228,
  92          226,223,220,223,226,
  93          229,232,234,237,239,
  94          241,243,245,246,248,
  95          249,250,251,252,253,
  96          253,254,254,254,254,
  97          254,253,253,252,251,
  98          250,249,248,247,245,
  99          243,241,239,237,235,
 100          233,230,227,224,221,
 101          222,225,227,230,233,
 102          235,237,240,242,243,
 103          245,247,248,249,250,
 104          251,252,253,253,254,
 105          254,254,254,254,253,
 106          253,252,251,250,249,
 107          248,246,244,243,241,
 108          239,236,234,232,229,
 109          226,223,220,223,226,
 110          228,231,234,236,238,
 111          240,242,244,246,247,
 112          249,250,251,252,253,
 113          253,254,254,254,254,
 114          254,253,253,252,252,
 115          251,250,248,247,245,
 116          244,242,240,238,236,
C51 COMPILER V9.59.0.0   SVPWM                                                             01/23/2019 17:22:28 PAGE 3   

 117          233,231,228,225,222,
 118          
 119          };
 120          
 121          
 122          unsigned char xdata T1Array[]={0,
 123          6,12,19,25,31,
 124          37,43,50,56,62,
 125          68,74,80,86,92,
 126          97,103,109,114,120,
 127          125,131,136,141,146,
 128          151,156,161,166,171,
 129          175,180,184,188,192,
 130          197,200,204,208,211,
 131          215,218,219,216,212,
 132          209,205,201,197,193,
 133          189,185,181,176,172,
 134          167,162,158,153,148,
 135          142,137,132,127,121,
 136          116,110,104,99,93,
 137          87,81,75,69,63,
 138          57,51,45,39,33,
 139          26,20,14,8,1,
 140          5,11,17,23,30,
 141          36,42,48,54,60,
 142          66,72,78,84,90,
 143          96,102,107,113,119,
 144          124,129,135,140,145,
 145          150,155,160,165,170,
 146          174,179,183,187,192,
 147          196,199,203,207,211,
 148          214,217,220,216,213,
 149          210,206,202,198,194,
 150          190,186,182,177,173,
 151          168,164,159,154,149,
 152          144,139,133,128,122,
 153          117,111,106,100,94,
 154          88,83,77,71,65,
 155          59,53,46,40,34,
 156          28,22,15,9,3,
 157          3,10,16,22,28,
 158          34,41,47,53,59,
 159          65,71,77,83,89,
 160          95,100,106,112,117,
 161          123,128,134,139,144,
 162          149,154,159,164,169,
 163          173,178,182,186,191,
 164          195,199,202,206,210,
 165          213,216,220,217,214,
 166          210,207,203,199,195,
 167          191,187,183,178,174,
 168          169,165,160,155,150,
 169          145,140,134,129,124,
 170          118,113,107,101,96,
 171          90,84,78,72,66,
 172          60,54,48,42,36,
 173          29,23,17,11,4};
 174          
 175          unsigned char xdata T2Array[]={220,
 176          223,226,229,231,234,
 177          236,238,241,242,244,
 178          246,247,249,250,251,
C51 COMPILER V9.59.0.0   SVPWM                                                             01/23/2019 17:22:28 PAGE 4   

 179          252,253,253,254,254,
 180          254,254,254,253,253,
 181          252,252,251,249,248,
 182          247,245,244,242,240,
 183          238,235,233,230,228,
 184          225,222,221,224,227,
 185          230,232,235,237,239,
 186          241,243,245,246,248,
 187          249,250,251,252,253,
 188          253,254,254,254,254,
 189          254,253,253,252,251,
 190          250,249,248,246,245,
 191          243,241,239,237,234,
 192          232,229,227,224,221,
 193          222,225,228,231,233,
 194          236,238,240,242,244,
 195          246,247,248,250,251,
 196          252,252,253,254,254,
 197          254,254,254,254,253,
 198          252,252,251,250,249,
 199          247,246,244,242,240,
 200          238,236,234,231,228,
 201          226,223,220,223,226,
 202          229,232,234,237,239,
 203          241,243,245,246,248,
 204          249,250,251,252,253,
 205          253,254,254,254,254,
 206          254,253,253,252,251,
 207          250,249,248,247,245,
 208          243,241,239,237,235,
 209          233,230,227,224,221,
 210          222,225,227,230,233,
 211          235,237,240,242,243,
 212          245,247,248,249,250,
 213          251,252,253,253,254,
 214          254,254,254,254,253,
 215          253,252,251,250,249,
 216          248,246,244,243,241,
 217          239,236,234,232,229,
 218          226,223,220,223,226,
 219          228,231,234,236,238,
 220          240,242,244,246,247,
 221          249,250,251,252,253,
 222          253,254,254,254,254,
 223          254,253,253,252,252,
 224          251,250,248,247,245,
 225          244,242,240,238,236,
 226          233,231,228,225,222,
 227          };
 228          
 229          void SetSVPWMValue(unsigned char length)
 230          {
 231   1        unsigned char i = 0;
 232   1        for(i = 0;i < 255;i += 1)
 233   1        { 
 234   2          T1Array[i] = ((int)SVPList1[i] * length) >> 8;
 235   2          T2Array[i] = ((int)SVPList2[i] * length) >> 8;
 236   2        }
 237   1      }
 238          
 239          void CalculateInverterVectorsWidth_Polar(unsigned char deg) using 1
 240          {
C51 COMPILER V9.59.0.0   SVPWM                                                             01/23/2019 17:22:28 PAGE 5   

*** WARNING C235 IN LINE 240 OF SVPWM.c: parameter 1: different types
 241   1        T1 = T1Array[deg];
 242   1        T2 = T2Array[deg];
 243   1        
 244   1      //  T1 = ((int)SVPList1[deg] * 50) >> 8;
 245   1      //  T2 = ((int)SVPList2[deg] * 50) >> 8;
 246   1        
 247   1        T07 = (255-T2) >> 1;  
 248   1        PWMS = T07;
 249   1        PWMM = T07 + T1;
 250   1        PWMB = T07 + T2;
 251   1        
 252   1        EA = 0;
 253   1        
 254   1        if((deg < 43))
 255   1        {
 256   2          TA = 0X0AA;
 257   2          TA = 0X55;
 258   2          SFRS = 1;
 259   2          PWM4L = T07;
 260   2      //    if(T1 > 30) 
 261   2      //      PWMINTC=0X15;
 262   2      //    else if(T2 - T1 > 30)
 263   2      //      PWMINTC=0X13;
 264   2      //    else  
 265   2      //      PWMINTC=0X11;
 266   2          TA = 0X0AA;
 267   2          TA = 0X55;
 268   2          SFRS = 0;
 269   2          PWM2L = PWMM;
 270   2          PWM0L = PWMB;
 271   2        }
 272   1        else if((deg < 85))
 273   1        {
 274   2          TA = 0X0AA;
 275   2          TA = 0X55;
 276   2          SFRS = 1;
 277   2          PWM4L = T07;
 278   2      //    if(T1 > 30) 
 279   2      //      PWMINTC=0X15;
 280   2      //    else if(T2 - T1 > 30)   
 281   2      //      PWMINTC=0X11;
 282   2      //    else  
 283   2      //      PWMINTC=0X13;
 284   2          TA = 0X0AA;
 285   2          TA = 0X55;
 286   2          SFRS = 0;
 287   2          PWM0L = PWMM;
 288   2          PWM2L = PWMB;
 289   2        }
 290   1        else if((deg < 128))
 291   1        {
 292   2          PWM0L = T07;
 293   2          TA = 0X0AA;
 294   2          TA = 0X55;
 295   2          SFRS = 1;
 296   2          PWM4L = PWMM;
 297   2      //    if(T1 > 30) 
 298   2      //      PWMINTC=0X11;
 299   2      //    else  if(T2 - T1 > 30)  
 300   2      //      PWMINTC=0X15;
 301   2      //    else  
C51 COMPILER V9.59.0.0   SVPWM                                                             01/23/2019 17:22:28 PAGE 6   

 302   2      //      PWMINTC=0X13;
 303   2          TA = 0X0AA;
 304   2          TA = 0X55;
 305   2          SFRS = 0;
 306   2          PWM2L = PWMB;
 307   2        }
 308   1        else if((deg < 171))
 309   1        {
 310   2          PWM0L = T07;
 311   2          PWM2L = PWMM;
 312   2          TA = 0X0AA;
 313   2          TA = 0X55;
 314   2          SFRS = 1;
 315   2          PWM4L = PWMB;
 316   2      //    if(T1 > 30) 
 317   2      //      PWMINTC=0X11;
 318   2      //    else  if(T2 - T1 > 30)  
 319   2      //      PWMINTC=0X13;
 320   2      //    else  
 321   2      //      PWMINTC=0X15;
 322   2          TA = 0X0AA;
 323   2          TA = 0X55;
 324   2          SFRS = 0;
 325   2        }
 326   1        else if((deg < 213))
 327   1        {
 328   2          PWM2L = T07;
 329   2          PWM0L = PWMM;
 330   2          TA = 0X0AA;
 331   2          TA = 0X55;
 332   2          SFRS = 1;
 333   2          PWM4L = PWMB;
 334   2      //    if(T1 > 30) 
 335   2      //      PWMINTC=0X13;
 336   2      //    else  if(T2 - T1 > 30)  
 337   2      //      PWMINTC=0X11;
 338   2      //    else  
 339   2      //      PWMINTC=0X15;
 340   2          TA = 0X0AA;
 341   2          TA = 0X55;
 342   2          SFRS = 0;
 343   2        }
 344   1        else  if((deg < 255))
 345   1        {
 346   2          PWM2L = T07;
 347   2          TA = 0X0AA;
 348   2          TA = 0X55;
 349   2          SFRS = 1;
 350   2          PWM4L = PWMM;
 351   2      //    if(T1 > 30) 
 352   2      //      PWMINTC=0X11;
 353   2      //    else  if(T2 - T1 > 30)  
 354   2      //      PWMINTC=0X15;
 355   2      //    else  
 356   2      //      PWMINTC=0X11;
 357   2          TA = 0X0AA;
 358   2          TA = 0X55;
 359   2          SFRS = 0;
 360   2          PWM0L = PWMB;
 361   2        }
 362   1        PMEN = 0X00;
 363   1        PWMCON1 |= 0X10;
C51 COMPILER V9.59.0.0   SVPWM                                                             01/23/2019 17:22:28 PAGE 7   

 364   1        PWMCON0 |= 0X40;
 365   1        EA = 1;
 366   1      }
 367          
 368          
 369          
 370          
 371          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    385    ----
   CONSTANT SIZE    =    512    ----
   XDATA SIZE       =    512    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      4    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
